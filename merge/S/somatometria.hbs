{{#define id="somatometria"}}
  {{#section id="base"}}
    {{!-- como el nombre se calcula antes, hay que agregar este campo en el excel --}}
    {{field id="imc" type="calc" value="=fn('imc', base)" format="#.##"}}
    {{field id="superficieCorporal" type="calc" value="=fn('bsa', base)" format="#.##"}}
    {{validator type="expr" validIf="=(@peso>=1&&@peso<=400)||@peso==999" message="Peso Incorrecto"}}
    {{validator type="expr" validIf="=(@estatura>=0.3&&@estatura<=2.2)||@estatura==999" message="Talla Incorrecta"}}
    {{validator type="expr" validIf="=!calc.isEmpty(@cintura)&&(@cintura==0||(@cintura>=20&&@cintura<=300))" message="Circunferencia Incorrecta"}}
    {{validator type="expr" notValidIf="=!calc.isEmpty(_parentDoc.persona.horaNacimiento)&&moment().diff(moment(_parentDoc.persona.fechaNacimiento).add(moment(_parentDoc.persona.horaNacimiento).hours(),'hours'),'hours')<24&&@peso>8" message="Peso Incorrecto (Máximo 8 kg.)"}}
    {{validator type="expr" notValidIf="=moment().diff(moment(_parentDoc.persona.fechaNacimiento),'days')<30&&@peso>12" message="Peso Incorrecto (Máximo 12 kg.)"}}
    {{validator type="expr" notValidIf="=moment().diff(moment(_parentDoc.persona.fechaNacimiento),'months')<12&&@peso>20" message="Peso Incorrecto (Máximo 20 kg.)"}}
    {{validator type="expr" notValidIf="=moment().diff(moment(_parentDoc.persona.fechaNacimiento),'years')>=1&&@peso<5" message="Peso Incorrecto (Mínimo 5 kg.)"}}
  {{/section}}
{{/define}}